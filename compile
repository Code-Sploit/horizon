#!/bin/bash

clear

files=`ls ./*.c`

rm -rf build

echo "Creating build directory..."

mkdir -p build

echo "Compiling src tree..."

for file in $files
do
	echo "Compiling: $file"

	gcc -c -g -Wno-discarded-qualifiers $file -o build/$file.o
done

echo "Linking executable..."

gcc -g build/* -o horizon

echo -e "Running executable on tests...\n"

./horizon hello.hrz

echo -e "\nRunning compiled file..."

./runasm
